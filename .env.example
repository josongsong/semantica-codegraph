# ========================================================================
# Semantica Codegraph v4 - Environment Configuration
# ========================================================================
# 이 파일을 복사하여 .env 파일을 만들고 실제 값으로 변경하세요.
# cp .env.example .env

# ========================================================================
# PostgreSQL Configuration (메타데이터, 세션, 협업 정보)
# ========================================================================
POSTGRES_USER=codegraph
POSTGRES_PASSWORD=codegraph_dev
POSTGRES_DB=codegraph
POSTGRES_PORT=7201

# ========================================================================
# Redis Configuration (세션, 캐시, 협업 메타데이터)
# 요구사항: 9-1 Session/Workspace 모델
# ========================================================================
REDIS_PASSWORD=codegraph_redis
REDIS_PORT=7202

# ========================================================================
# Qdrant Configuration (벡터 검색)
# 요구사항: 2-3 Qdrant 스키마 - code_chunks, symbol_summaries
# ========================================================================
QDRANT_HTTP_PORT=7203
QDRANT_GRPC_PORT=7204
QDRANT_COLLECTION=codegraph
QDRANT_MAX_THREADS=4

# ========================================================================
# Zoekt Configuration (Lexical 검색)
# 요구사항: 2-4 Zoekt 인덱스 - BM25 + substring + regex
# ========================================================================
ZOEKT_PORT=7205
ZOEKT_INDEX_INTERVAL=1h

# ========================================================================
# Kùzu Configuration (Graph Store - Embedded)
# 요구사항: 1-2 코드 그래프/메타: Kùzu (embedded, graph + column store)
# ========================================================================
KUZU_DB_PATH=./data/kuzu
KUZU_BUFFER_POOL_SIZE=1024

# ========================================================================
# LLM Provider Configuration
# 요구사항: 8-1 LLMProvider 추상화 - OpenAI / Claude / 로컬 모델
# ========================================================================
# OpenAI API Key (필수)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Embedding 모델 설정
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536

# Completion 모델 설정 (선택)
# COMPLETION_MODEL=gpt-4-turbo-preview
# COMPLETION_MODEL=gpt-3.5-turbo

# ========================================================================
# API Server Configuration
# 요구사항: 1-1 CLI / MCP / HTTP API / IDE 플러그인 헤드리스 엔진
# ========================================================================
API_PORT=7200
API_RELOAD=true

# ========================================================================
# Application Configuration
# ========================================================================
ENVIRONMENT=development
LOG_LEVEL=INFO

# ========================================================================
# Security & ACL Configuration
# 요구사항: 5-5 ACL / Security Filter
# ========================================================================
# JWT Secret (프로덕션 환경에서는 반드시 변경)
# JWT_SECRET=your-secret-key-here
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION=3600

# ========================================================================
# Observability & Monitoring
# 요구사항: 11-4 Observability - fallback_level, confidence, latency
# ========================================================================
# 비용 임계치 (USD)
# COST_THRESHOLD_PER_REQUEST=0.10
# COST_THRESHOLD_PER_SESSION=1.00
# COST_THRESHOLD_PER_USER_DAILY=10.00

# Telemetry (선택)
# ENABLE_TELEMETRY=true
# SENTRY_DSN=your-sentry-dsn-here

# ========================================================================
# Indexing Configuration
# 요구사항: 4-1 인덱싱 파이프라인
# ========================================================================
# 인덱싱 워커 수
# INDEXING_WORKERS=4

# 최대 파일 크기 (bytes)
# MAX_FILE_SIZE=1048576

# 지원 언어 (쉼표로 구분)
# SUPPORTED_LANGUAGES=python,typescript,javascript,java,kotlin,go

# ========================================================================
# Git Configuration
# 요구사항: 7-1 Git 이벤트 처리, 7-2 브랜치/PR 인덱싱
# ========================================================================
# Git 작업 디렉토리
# GIT_WORKSPACE=/app/workspace

# 자동 인덱싱 활성화
# AUTO_INDEX_ON_COMMIT=true
# AUTO_INDEX_ON_BRANCH_SWITCH=true

# ========================================================================
# Feature Flags
# 요구사항: 2-1 FEATURE_FLAG 노드
# ========================================================================
# GraphRAG 활성화
# ENABLE_GRAPH_RAG=true

# Self-correction 활성화
# ENABLE_SELF_CORRECTION=true

# 멀티레포 지원
# ENABLE_MULTI_REPO=false

# 협업 모드
# ENABLE_COLLABORATION=false

# ========================================================================
# Development & Testing
# ========================================================================
# Mock 서비스 사용 (테스트용)
# USE_MOCKS=false

# 디버그 모드
# DEBUG=false
