1. 전체 시나리오 테이블 (1~2단계 + RepoMap 포함)
1-1. 우선순위 1 (엔진 기반 필수)
A. 심볼/정의/구조 탐색

| 번호 | 시나리오 이름 | 대표 기능·목적 |
| 1-1 | 정의 위치 / 코드 블럭 찾기 | 함수·클래스·메서드 정의 위치, 소스 코드 블럭 추출 |
| 1-2 | enum · 인터페이스 정의 찾기 | 타입 정의 위치, 인터페이스 선언부 탐색 |
| 1-3 | 라우트 → 핸들러 매핑 | FastAPI/Nest/Spring 라우트 → 핸들러 코드 찾기 |
| 1-4 | 인터페이스/포트 구현체 목록 | Port/Interface 구현체 자동 탐색 |
| 1-5 | import/export 구조 분석 | TS/Python 모듈 export 체계 분석 |

B. 호출 관계 / 의존 분석

| 번호 | 시나리오 이름 | 대표 기능·목적 |
| 1-6 | 특정 함수 호출하는 모든 곳 | 호출자 목록 전수 조사 |
| 1-7 | 특정 클래스/타입 사용처 | 타입/클래스 사용처 분석 |
| 1-8 | 리팩토링 영향 범위 | rename/시그니처 변경 영향도 분석 |

C. 파이프라인 / 엔드투엔드 흐름

| 번호 | 시나리오 이름 | 대표 기능·목적 |
| 1-9 | 인덱싱 파이프라인 경로 | IndexingPipeline → Chunker call chain |
| 1-10 | 검색 → 벡터 → reranker 흐름 | HybridRetriever 전체 호출 플로우 |
| 1-11 | GraphStore 초기화 경로 | store wiring, DB 연결 흐름 |
| 1-12 | 에러 핸들링 전체 플로우 | exception → handler → HTTP 응답 |

D. API / DTO

| 번호 | 시나리오 | 대표 기능 |
| 1-13 | POST/GET API 목록 | API 표 자동 생성 |
| 1-14 | DTO 정의 위치 | DTO 소스 코드 검색 |
| 1-15 | DTO 사용처 / 변경 영향 | DTO 변경 시 영향 분석 |

E. 설정 / 환경 변수 / 서비스 호출

| 번호 | 시나리오 | 대표 기능 |
| 1-16 | config override 흐름 | config.yml → env → runtime |
| 1-17 | 서비스 간 호출 관계 | search-service ↔ indexing-service |
| 1-18 | tracing/logging 흐름 | trace id 흐름 분석 |
| 1-19 | index rebuild 배치/스케줄러 | cron 기반 job 흐름 |
| 1-20 | ACL/보안 필터 테스트 | security level 기반 필터링 |

1-2. 우선순위 2 (실무 필수)
A. 구조 탐색 / 리팩토링 / 품질

| 번호 | 시나리오 | 목적 |
| 2-1 | 인터페이스 구현체 찾기 | Port/Interface → Adapter 매핑 |
| 2-2 | deprecated API 탐지 | v1/v2 공존, deprecated 사용처 추적 |
| 2-3 | unused 변수/함수 | dead code 탐지 |
| 2-4 | side effect 탐지 | 전역/캐시 변경 side-effect 코드 탐색 |
| 2-5 | import cycle 감지 | Python/TS 순환 의존 탐색 |
| 2-6 | exception throw/handle 매핑 | 예외 발생–처리 관계 분석 |

B. 파싱/캐싱/이벤트/배치

| 번호 | 시나리오 | 목적 |
| 2-7 | error code 사용처 | 내부 err_* 코드 흐름 분석 |
| 2-8 | 파싱 파이프라인 흐름 | AST → 심볼 → IR 전체 흐름 |
| 2-9 | caching layer 흐름 | parse cache / embedding cache / search cache |
| 2-10 | event-driven 흐름 | repo_indexed, indexing_failed |
| 2-11 | 배치 job / scheduler | cron job → handler 매핑 |

C. CLI / gRPC / DTO 멀티버전

| 번호 | 시나리오 | 목적 |
| 2-12 | CLI → internal 모듈 | semantica index / serena init 플로우 |
| 2-13 | gRPC / retry / backoff | vector DB 및 외부 호출 retry 로직 |
| 2-14 | DTO / API 버전 분기 | v1/v2 구조 차이 / 버전별 로직 |

D. 보안 / env / 무결성 / 디버깅

| 번호 | 시나리오 | 목적 |
| 2-15 | deprecated API 사용 탐지 | 남은 v1 호출부 확인 |
| 2-16 | env var 사용처 | SEMANTICA_* env 추적 |
| 2-17 | 보안 / 입력 검증 누락 탐지 | 인증/인가/validation 흐름 점검 |
| 2-18 | 크로스-스토리지 무결성 | Qdrant ↔ GraphStore 매핑 검증 |
| 2-19 | 디버깅 / 로그 기반 역추적 | 오류 로그 발생 경로 자동 추적 |
| 2-20 | 테스트 / 타입 / 리팩토링 영향 | 테스트 커버리지/모듈 이동 영향 분석 |

1-3. RepoMap 전용 (신규 2-21)

| 번호 | 시나리오 | 목적 |
| 2-21 | RepoMap / 프로젝트 구조 요약 | 중요 파일 추천, 기능 단위 구조 요약, Parent–Leaf 기반 맥락 생성 |

2. “시나리오 × 기술 축” 매핑 테이블

(LLM 코드 리트리버가 어떤 축을 사용해 시나리오를 해결하는지)

2-1. 기술 축 목록

| 기술 축 | 핵심 기능 |
| AST | 구조·스코프 기반 분석·안전한 리라이팅 |
| IR | 언어별 AST → 공통 IR |
| Graph | 관계·흐름·의존 구조 |
| Lexical | 빠른 substring / 텍스트 기반 검색 |
| Vector | 자연어 의미 기반 검색 |
| Symbol Index | 정확한 심볼 해석(go-to-def/find-refs) |
| Fuzzy | 오타·불완전 코드 대응 |
| Runtime Info | 실제 실행 흐름 반영 |
| Domain Metadata | README/ADR/API 스펙 결합 |
| Weighted Fusion | 다중 신호 결합 최종 ranking |
| Chunk Hierarchy | LLM 친화적 parent/leaf chunk 구성 |
| RepoMap | 중요도 점수 기반 구조 요약 |

3. 시나리오 × 기술 축 매핑 (요약)
A. 구조/정의/심볼 중심

| 시나리오 | 사용 축 |
| 1-1 정의 위치 | Symbol Index, AST |
| 1-2 enum/인터페이스 | Symbol Index |
| 1-3 라우트→핸들러 | AST, Runtime Info |
| 1-4 구현체 목록 | Symbol Index |
| 1-5 import/export | AST, Graph |

B. 호출 관계 / 영향도

| 시나리오 | 사용 축 |
| 1-6 호출하는 곳 | Graph, Symbol Index |
| 1-7 타입 사용처 | Graph, AST |
| 1-8 rename/시그니처 영향 | Graph, Symbol Index, AST |

C. 파이프라인 / 엔드투엔드

| 시나리오 | 사용 축 |
| 1-9 인덱싱 체인 | Graph, Chunk Hierarchy |
| 1-10 검색→rerank | Graph, Weighted Fusion |
| 1-11 GraphStore wiring | Runtime Info |
| 1-12 에러 핸들링 | Runtime Info |

D. API / DTO

| 시나리오 | 사용 축 |
| 1-13 API 목록 | AST |
| 1-14 DTO 정의 | AST |
| 1-15 DTO 영향 | Graph, Symbol Index |

E. 환경/설정/서비스/보안

| 시나리오 | 사용 축 |
| 1-16 config override | Runtime Info |
| 1-17 서비스 간 호출 | Runtime Info, Graph |
| 1-18 tracing/logging | Runtime Info |
| 1-19 index build 배치 | Runtime Info |
| 1-20 ACL 필터링 | Runtime Info, Domain Metadata |

F. 실무 필수 / 품질

| 시나리오 | 사용 축 |
| 2-1 구현체 찾기 | Symbol Index |
| 2-2 deprecated | Symbol Index, Lexical |
| 2-3 unused | Graph, AST |
| 2-4 side effect | Runtime Info |
| 2-5 import cycle | Graph |
| 2-6 예외 throw/handle | Runtime Info |

G. 파싱/캐싱/이벤트/배치

| 시나리오 | 사용 축 |
| 2-7 error code | Lexical, Runtime Info |
| 2-8 파싱 파이프라인 | AST, IR |
| 2-9 캐싱 레이어 | Runtime Info |
| 2-10 이벤트 흐름 | Runtime Info |
| 2-11 배치 | Runtime Info |

H. CLI / gRPC / 버전관리

| 시나리오 | 사용 축 |
| 2-12 CLI | Runtime Info |
| 2-13 gRPC/backoff | Runtime Info |
| 2-14 DTO/API 버전 | Symbol Index, AST |

I. 보안/무결성/디버깅

| 시나리오 | 사용 축 |
| 2-15 deprecated API | Symbol Index, Lexical |
| 2-16 env var | Runtime Info |
| 2-17 입력검증 | Runtime Info |
| 2-18 크로스스토리지 무결성 | Runtime Info, Graph |
| 2-19 디버깅/로그 역추적 | Runtime Info |
| 2-20 테스트/리팩토링 | Graph, AST |

J. RepoMap (신규)

| 시나리오 | 사용 축 |
| 2-21 RepoMap | Graph, Chunk Hierarchy, Domain Metadata, Vector, Weighted Fusion |