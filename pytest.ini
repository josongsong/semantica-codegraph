[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Asyncio 설정
asyncio_mode = strict
asyncio_default_fixture_loop_scope = function

# Markers
markers =
    slow: 느린 테스트 (benchmark, large data) - 기본 실행 시 skip
    integration: 통합 테스트
    benchmark: 성능 벤치마크 테스트
    unit: 단위 테스트
    stress: 스트레스 테스트
    extreme: 극단적 케이스 테스트
    critical: 크리티컬 경로 테스트
    server: 서버 필요 테스트
    e2e: End-to-end 테스트

# 빠른 테스트만 실행: pytest (기본)
# 전체 실행: pytest -m ""
# Benchmark만: pytest -m benchmark

# Timeout (오래 걸리는 테스트 방지) - 60초로 단축
timeout = 60

# 로그 레벨
log_cli = false
log_cli_level = WARNING

# 경고 무시 (속도 향상)
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::pytest.PytestUnraisableExceptionWarning

# SOTA 최적화 옵션
addopts =
    --strict-markers
    --tb=line
    -q
    -m "not slow and not integration and not e2e"
    --benchmark-disable
    --benchmark-storage=file://benchmark/artifacts/tmp/pytest-benchmark/root
    -x
    -n auto
    --dist loadfile
    --durations=5
    --ignore=tests/benchmark
    --ignore=tests/stress
    --ignore=tests/e2e
    --cache-clear=false
    --co-first-failed
    -p no:randomly
